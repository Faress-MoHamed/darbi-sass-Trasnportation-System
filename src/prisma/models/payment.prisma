// ============================================================================
// Payments & Financial Reports
// ============================================================================

model Payment {
  id            String        @id @default(uuid()) @db.Uuid
  tenantId      String        @map("tenant_id") @db.Uuid
  userId        String?       @map("user_id") @db.Uuid
  amount        Decimal?      @db.Decimal(10, 2)
  method        PaymentType
  provider      String?       @db.VarChar(50)
  transactionId String?       @map("transaction_id") @db.VarChar(150)
  status        PaymentStatus
  createdAt     DateTime      @default(now()) @map("created_at")
  updatedAt     DateTime      @updatedAt @map("updated_at")
  reference     String?       @db.VarChar(100)
  notes         String?       @db.Text

  tenant        Tenant        @relation(fields: [tenantId], references: [id])
  user          User?         @relation(fields: [userId], references: [id])

  bookings      Booking[]

  @@map("payments")
}

model PaymentMethod {
  id        String            @id @default(uuid()) @db.Uuid
  tenantId  String            @map("tenant_id") @db.Uuid
  userId    String?           @map("user_id") @db.Uuid
  type      PaymentMethodEnum
  provider  String?           @db.VarChar(50)
  last4     String?           @db.VarChar(4)
  token     String?           @db.VarChar(255)
  isDefault Boolean?          @map("is_default")
  createdAt DateTime          @default(now()) @map("created_at")

  tenant    Tenant            @relation(fields: [tenantId], references: [id])
  user      User?             @relation(fields: [userId], references: [id])

  @@map("payment_methods")
}

model Revenue {
  id          String   @id @default(uuid()) @db.Uuid
  tenantId    String   @map("tenant_id") @db.Uuid
  date        DateTime @db.Date
  totalAmount Decimal? @map("total_amount") @db.Decimal(12, 2)
  tripsCount  Int?     @map("trips_count")
  createdAt   DateTime @default(now()) @map("created_at")

  tenant      Tenant   @relation(fields: [tenantId], references: [id])

  @@map("revenues")
}

model Expense {
  id          String   @id @default(uuid()) @db.Uuid
  tenantId    String   @map("tenant_id") @db.Uuid
  description String?  @db.VarChar(255)
  amount      Decimal? @db.Decimal(10, 2)
  category    String?  @db.VarChar(100)
  date        DateTime @db.Date
  createdAt   DateTime @default(now()) @map("created_at")

  tenant      Tenant   @relation(fields: [tenantId], references: [id])

  @@map("expenses")
}

model FinancialReport {
  id           String               @id @default(uuid()) @db.Uuid
  tenantId     String               @map("tenant_id") @db.Uuid
  reportType   FinancialReportType  @map("report_type")
  startDate    DateTime             @map("start_date") @db.Date
  endDate      DateTime             @map("end_date") @db.Date
  filePath     String?              @map("file_path") @db.VarChar(255)
  createdAt    DateTime             @default(now()) @map("created_at")

  tenant       Tenant               @relation(fields: [tenantId], references: [id])

  @@map("financial_reports")
}