
model Route {
  id                String                  @id @default(uuid()) @db.Uuid
  tenantId          String                  @map("tenant_id") @db.Uuid
  name              String                  @db.VarChar(150)
  distanceKm        Decimal?                @map("distance_km") @db.Decimal(6, 2)
  estimatedTime     DateTime?               @map("estimated_time") @db.Time
  active            Boolean?

  tenant            Tenant                  @relation(fields: [tenantId], references: [id])

  stations          Station[]
  trips             Trip[]
  customFieldValues RouteCustomFieldValue[]

  @@map("routes")
}

model Station {
  id           String         @id @default(uuid()) @db.Uuid
  tenantId     String         @map("tenant_id") @db.Uuid
  name         String         @db.VarChar(150)
  latitude     Decimal?       @db.Decimal(10, 6)
  longitude    Decimal?       @db.Decimal(10, 6)
  routeId      String?        @map("route_id") @db.Uuid
  sequence     Int?

  tenant       Tenant         @relation(fields: [tenantId], references: [id])
  route        Route?         @relation(fields: [routeId], references: [id])

  tripStations TripStation[]

  @@map("stations")
}

model RouteCustomField {
  id         Int                        @id @default(autoincrement())
  tenantId   String                     @map("tenant_id") @db.Uuid
  name       String                     @db.VarChar(100)
  label      String                     @db.VarChar(150)
  fieldType  FieldType                  @map("field_type")
  required   Boolean?
  options    Json?
  createdAt  DateTime                   @default(now()) @map("created_at")
  updatedAt  DateTime                   @updatedAt @map("updated_at")

  tenant     Tenant                     @relation(fields: [tenantId], references: [id])

  values     RouteCustomFieldValue[]

  @@map("route_custom_fields")
}

model RouteCustomFieldValue {
  id            BigInt              @id @default(autoincrement())
  routeId       String              @map("route_id") @db.Uuid
  customFieldId Int                 @map("custom_field_id")
  value         String?             @db.Text
  updatedAt     DateTime            @updatedAt @map("updated_at")

  route         Route               @relation(fields: [routeId], references: [id])
  customField   RouteCustomField    @relation(fields: [customFieldId], references: [id])

  @@map("route_custom_field_values")
}