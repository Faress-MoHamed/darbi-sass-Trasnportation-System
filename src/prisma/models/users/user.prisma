model User {
  id                 String                   @id @default(uuid()) @db.Uuid
  tenantId           String                   @map("tenant_id") @db.Uuid
  role               UserRoleEnum             @default(passenger)
  name               String?                  @db.VarChar(150)
  email              String?                  @unique @db.VarChar(150)
  phone              String                   @db.VarChar(20)
  password           String                   @map("password") @db.Text
  avatar             String?                  @db.VarChar(255)
  language           String?                  @db.VarChar(10)
  status             UserStatus
  lastLogin          DateTime?                @map("last_login")
  createdAt          DateTime                 @default(now()) @map("created_at")
  mustChangePassword Boolean                  @default(true)

  tenant             Tenant                   @relation(fields: [tenantId], references: [id])

  logs               Log[]
  driver             Driver?
  passenger          Passenger?
  userRoles          UserRole[]
  bookings           Booking[]
  subscriptions      Subscription[]
  loyaltyPoints      LoyaltyPoint[]
  payments           Payment[]
  paymentMethods     PaymentMethod[]
  notifications      Notification[]
  supportTickets     SupportTicket[]
  supportReplies     SupportReply[]
  auditLogs          AuditLog[]
  customFieldValues  UserCustomFieldValue[]
  accessTokens       AccessToken[]
  otpTokens          OtpToken[]

  @@map("users")
}

model UserCustomField {
  id         Int                       @id @default(autoincrement())
  tenantId   String                    @map("tenant_id") @db.Uuid
  name       String                    @db.VarChar(100)
  label      String                    @db.VarChar(150)
  fieldType  FieldType                 @map("field_type")
  required   Boolean?
  options    Json?
  createdAt  DateTime                  @default(now()) @map("created_at")
  updatedAt  DateTime                  @updatedAt @map("updated_at")

  tenant     Tenant                    @relation(fields: [tenantId], references: [id])

  values     UserCustomFieldValue[]

  @@map("user_custom_fields")
}

model UserCustomFieldValue {
  id            BigInt          @id @default(autoincrement())
  userId        String          @map("user_id") @db.Uuid
  customFieldId Int             @map("custom_field_id")
  value         String?         @db.Text
  updatedAt     DateTime        @updatedAt @map("updated_at")

  user          User            @relation(fields: [userId], references: [id])
  customField   UserCustomField @relation(fields: [customFieldId], references: [id])

  @@map("user_custom_field_values")
}