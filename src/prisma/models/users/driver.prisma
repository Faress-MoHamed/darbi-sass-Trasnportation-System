
model Driver {
  id                String                    @id @default(uuid()) @db.Uuid
  tenantId          String                    @map("tenant_id") @db.Uuid
  userId            String                    @unique @map("user_id") @db.Uuid
  licenseNumber     String?                   @map("license_number") @db.VarChar(50)
  vehicleType       String?                   @map("vehicle_type") @db.VarChar(50)
  status            DriverStatus
  rating            Decimal?                  @db.Decimal(2, 1)
  connected         Boolean?

  tenant            Tenant                    @relation(fields: [tenantId], references: [id])
  user              User                      @relation(fields: [userId], references: [id])

  trips             Trip[]
  emergencyAlerts   EmergencyAlert[]
  customFieldValues DriverCustomFieldValue[]

  @@map("drivers")
}
model DriverCustomField {
  id         Int                         @id @default(autoincrement())
  tenantId   String                      @map("tenant_id") @db.Uuid
  name       String                      @db.VarChar(100)
  label      String                      @db.VarChar(150)
  fieldType  FieldType                   @map("field_type")
  required   Boolean?
  options    Json?
  createdAt  DateTime                    @default(now()) @map("created_at")
  updatedAt  DateTime                    @updatedAt @map("updated_at")

  tenant     Tenant                      @relation(fields: [tenantId], references: [id])

  values     DriverCustomFieldValue[]

  @@map("driver_custom_fields")
}

model DriverCustomFieldValue {
  id            BigInt              @id @default(autoincrement())
  driverId      String              @map("driver_id") @db.Uuid
  customFieldId Int                 @map("custom_field_id")
  value         String?             @db.Text
  updatedAt     DateTime            @updatedAt @map("updated_at")

  driver        Driver              @relation(fields: [driverId], references: [id])
  customField   DriverCustomField   @relation(fields: [customFieldId], references: [id])

  @@map("driver_custom_field_values")
}